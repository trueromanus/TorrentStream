# TorrentStream
Simple web server for streaming torrent files in video players (like VLC, MPC-HC and so on)

### Порт приложения?
По умолчанию порт приложения `5082`. Поменять порт можно  определив переменную окружения `WEB_PORT`.

### Где хранятся скачанные файлы?
Файлы хранятся в папке Downloads относительной папки где расположено приложение. Поменять основной путь можно определив переменную окружения `DOWNLOAD_PATH`.

### REST API
**/online?index=X&id=Ypath=Z**  
X - индекс файла в торренте по которому будет начато скачивание и запуск стриминга  
Y - числовое значение используется как идентификатор внешней сущности  
Z - полный URL для скачивания торрент файла (не magnet ссылка именно к файлу torrent)  
Ответом (если Все удалось) будет redirect на ссылку для стриминга видеофайла (индекс которого указан в параметре index).
Т.е. в плеер когда Вы положите эту (/online) ссылку внутри которой скачается файл торрента и начнется его скачивание во внутреннем клиенте и как результат
произойдет redirect по ссылке для стриминга.  
  
**/fulldownload?id=Ypath=Z**  
Y - числовое значение используется как идентификатор внешней сущности  
Z - полный путь для скачивания торрент файла (не magnet ссылка именно к файлу torrent)  
Ответ пустой. Если все передано корректно то скачается торрент файл и начнется скачание его контекта в клиенте.
  
**/torrents**  
Ответ содержит данные о текущий торрентах в виде json.  
Пример ответа:
```json
[
  {
    "Identifier": 1, 
    "DownloadPath": "C:/blablabla/path",
    "AllDownloaded": false,
    "Files": [
      {
        "IsDownloaded": false,
        "PercentComplete": 80,
        "DownloadedPath": "C:/blablabla/path/file.mp4"
      }
    ]
  }
]
```
  
**/clearall**  
Ответ пустой. Удаляет все файлы и торренты доступные в клиенте.
  
**/clearonlytorrent?path=X**  
X - путь к торрент файлу ранее переданный в запросы /online или /fulldownload  
Ответ пустой. Удаляет торрент из клиента, уже загруженные файлы остаются в файловой системе.
  
**/cleartorrentanddata?path=X**  
X - путь к торрент файлу ранее переданный в запросы /online или /fulldownload  
Ответ пустой. Удаляет торрент из клиента и загруженные файлы в файловой системе
